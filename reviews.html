<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>í›„ê¸° ê²Œì‹œíŒ | Maple FastBuy</title>

  <!-- ê¸°ë³¸ SEO -->
  <meta name="description" content="ë©”ì´í”ŒìŠ¤í† ë¦¬ ê¸‰ì²˜í…œ ê±°ë˜ í›„ê¸° ê²Œì‹œíŒ - Maple FastBuy ì´ìš©ìë“¤ì˜ ì‹¤ì œ í›„ê¸° ëª¨ìŒ" />
  <link rel="canonical" href="/reviews.html" />
  <meta name="robots" content="index,follow" />

  <style>
    :root{
      --bg:#0b0f14; --panel:#111821; --muted:#6b7a90; --text:#e9eef5; --accent:#4cc9f0;
      --ok:#2dd4bf; --warn:#f59e0b; --danger:#ef4444; --ring:rgba(76,201,240,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:Pretendard,Inter,Arial,sans-serif}
    a{color:var(--accent)}
    .wrap{max-width:1100px;margin:40px auto;padding:0 16px}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    .title{font-weight:800;font-size:28px}
    /* íˆ´ë°” */
    .toolbar{display:grid;grid-template-columns:1fr 140px 140px 120px;gap:10px;margin:16px 0}
    input[type="search"],select{
      width:100%;padding:12px 14px;border-radius:12px;border:1px solid #1f2937;background:#0f1520;color:var(--text);
      outline:none;
    }
    input[type="search"]:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--ring)}
    /* ë¦¬ìŠ¤íŠ¸ */
    .grid{display:grid;gap:14px;grid-template-columns:repeat(1,minmax(0,1fr))}
    @media(min-width:640px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:980px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .card{
      background:linear-gradient(180deg,#0f1623,#0d1320 60%);
      border:1px solid #1f2a37;border-radius:var(--radius);padding:16px;
      box-shadow:0 12px 30px rgba(0,0,0,.35);
    }
    .meta{display:flex;justify-content:space-between;align-items:center;font-size:12px;color:#9fb3c8;margin-bottom:8px}
    .nick{font-weight:700;color:#b3d7ff}
    .rating{color:#facc15}
    .content{white-space:pre-wrap;line-height:1.6;margin-top:6px}
    .tags{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .tag{font-size:11px;color:#9fb3c8;background:#0c1220;border:1px solid #1c2433;padding:4px 8px;border-radius:999px}
    .actions{margin-top:12px}
    .btn{padding:10px 12px;border-radius:10px;border:1px solid #243045;background:#0e1420;color:#dce7f7;cursor:pointer}
    .btn:hover{opacity:.92}
    .btn-ok{background:#0b1f1c;border-color:#1e3a34;color:#b3fff0}
    .btn-danger{background:#1a0a0a;border-color:#3a1212;color:#ffc7c7}
    .btn-ghost{background:transparent;border-color:#28374f}
    .panel{margin-top:24px;border:1px solid #1f2a37;background:#0c1320;border-radius:var(--radius);padding:16px}
    .footer{margin:40px 0;color:#6b7a90;font-size:12px;text-align:center}
    .admin-bar{display:flex;gap:10px;align-items:center}
    .badge{padding:6px 10px;border-radius:999px;background:#0c1a12;border:1px solid #1b3a2c;color:#a7f3d0;font-size:12px}
    .pagination{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin:18px 0}
    .page-btn{padding:8px 10px;border-radius:10px;border:1px solid #263347;background:#0d1522;color:var(--text);cursor:pointer}
    .page-btn.active{border-color:var(--accent);box-shadow:0 0 0 3px var(--ring)}
    [data-nosnippet]{user-select:none}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="title">í›„ê¸° ê²Œì‹œíŒ</div>
      <div class="admin-bar" data-nosnippet>
        <span id="adminState" class="badge" style="display:none;">ê´€ë¦¬ì ëª¨ë“œ</span>
        <!-- PIN ì…ë ¥ì°½ ì—†ìŒ(ìˆ¨ê¹€ ìœ ì§€) -->
        <button id="btnAdmin" class="btn btn-ghost">ê´€ë¦¬ì ì „í™˜</button>
      </div>
    </div>

    <!-- âœ… í›„ê¸° ì‘ì„±: í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ì´ë™ (ì›ë˜ ë””ìì¸ ìœ ì§€) -->
    <div class="panel" data-nosnippet>
      <h3>í›„ê¸° ì‘ì„±</h3>
      <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
        <input id="nickname" type="text" placeholder="ë‹‰ë„¤ì„ (í•„ìˆ˜)">
        <input id="rating" type="number" min="1" max="5" step="1" value="5" placeholder="ë³„ì  (1~5)">
      </div>
      <div class="row" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;">
        <input id="tags" type="text" placeholder="íƒœê·¸ (ì‰¼í‘œë¡œ êµ¬ë¶„, ì˜ˆ: ë¹ ë¥¸ê±°ë˜,ê°€ìœ„ê°’)">
        <input id="title" type="text" placeholder="ì œëª© (ì„ íƒ)">
      </div>
      <div class="row" style="display:grid;grid-template-columns:3fr 1fr;gap:10px;margin-top:10px;">
        <textarea id="content" placeholder="í›„ê¸° ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš” (í•„ìˆ˜)"></textarea>
        <button id="btnAdd" class="btn btn-ok">í›„ê¸° ë“±ë¡</button>
      </div>
    </div>

    <!-- ğŸ” ëª©ë¡ ì»¨íŠ¸ë¡¤ì€ ì‘ì„± í¼ ì•„ë˜ë¡œ ì´ë™ -->
    <div class="toolbar" style="margin-top:18px;">
      <input id="q" type="search" placeholder="ê²€ìƒ‰: ë‚´ìš©/ë‹‰ë„¤ì„/íƒœê·¸" />
      <select id="sort">
        <option value="new">ìµœì‹ ìˆœ</option>
        <option value="old">ì˜¤ë˜ëœìˆœ</option>
        <option value="high">ë³„ì  ë†’ì€ìˆœ</option>
        <option value="low">ë³„ì  ë‚®ì€ìˆœ</option>
      </select>
      <select id="pageSize">
        <option value="9">9ê°œì”©</option>
        <option value="12">12ê°œì”©</option>
        <option value="18">18ê°œì”©</option>
      </select>
      <button id="btnReset" class="btn">í•„í„° ì´ˆê¸°í™”</button>
    </div>

    <!-- âœ… í›„ê¸° ëª©ë¡(ê¸°ë¡): í˜ì´ì§€ í•˜ë‹¨ -->
    <div id="list" class="grid"></div>
    <div id="pagination" class="pagination"></div>

    <div class="footer">
      â€» ë³¸ ê²Œì‹œíŒì˜ ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì € <strong>localStorage</strong>ì— ì €ì¥ë©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €/ê¸°ê¸° ë³€ê²½ ì‹œ ë³´ì´ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”.
    </div>
  </div>

  <script>
    const KEY="mfb_reviews_v2", ADMIN_KEY="mfb_admin_on", ADMIN_PIN="8246";

    const store={
      all(){ try{return JSON.parse(localStorage.getItem(KEY))||[];}catch(e){return[];} },
      save(l){ localStorage.setItem(KEY, JSON.stringify(l)); },
      upsert(i){ const l=this.all(); const n=l.findIndex(x=>x.id===i.id);
        if(n>=0) l[n]=i; else l.unshift(i); this.save(l); },
      remove(id){ this.save(this.all().filter(x=>x.id!==id)); }
    };

    const uid=()=>Math.random().toString(36).slice(2)+Date.now().toString(36);
    const fmtDate=t=>new Date(t).toLocaleString("ko-KR",{hour12:false});
    const esc=s=>(s||"").replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]));

    // ì´ˆê¸° ë”ë¯¸(ë¹„ì–´ìˆì„ ë•Œë§Œ)
    (function seed(){
      if(store.all().length) return;
      const now=Date.now();
      store.save([
        {id:uid(), title:"ë¹ ë¥´ê²Œ ì •ì‚° ë°›ì•˜ìŠµë‹ˆë‹¤", nickname:"í•˜ëŠ˜ë°”ëŒ", content:"ì•¼ê°„ì—ë„ ë°”ë¡œ ëŒ€ì‘í•´ì£¼ì…”ì„œ ë†€ëì–´ìš”. ê°€ìœ„ê°’ë„ ì±™ê²¨ì£¼ì‹¬!", rating:5, tags:["ë¹ ë¥¸ê±°ë˜","ê°€ìœ„ê°’"], createdAt:now-1000*60*60*20},
        {id:uid(), title:"í•©ë¦¬ì ì¸ ê°€ê²©", nickname:"ì´ˆì½”ìš°ìœ ", content:"ì‹œì„¸ ì„¤ëª… ì¹œì ˆ, ê°€ê²© ë‚©ë“. ë‹¤ìŒì—ë„ ì´ìš©í• ê²Œìš”.", rating:5, tags:["í•©ë¦¬ì ","ì¹œì ˆ"], createdAt:now-1000*60*60*60},
        {id:uid(), title:"ì‚´ì§ ëŒ€ê¸° ìˆì—ˆìŒ", nickname:"ë©”ë¦°ì´", content:"ì£¼ë§ì´ë¼ ê·¸ëŸ°ì§€ 10ë¶„ ì •ë„ ëŒ€ê¸°, ê·¸ë˜ë„ ê¸ˆë°© ì²˜ë¦¬!", rating:4, tags:["ì£¼ë§","ëŒ€ê¸°"], createdAt:now-1000*60*60*80},
      ]);
    })();

    let state={ q:"", sort:"new", page:1, pageSize:9, admin:localStorage.getItem(ADMIN_KEY)==="1" };

    // ì—˜ë¦¬ë¨¼íŠ¸
    const $list=document.getElementById("list");
    const $pagination=document.getElementById("pagination");
    const $q=document.getElementById("q");
    const $sort=document.getElementById("sort");
    const $pageSize=document.getElementById("pageSize");
    const $btnReset=document.getElementById("btnReset");
    const $nickname=document.getElementById("nickname");
    const $rating=document.getElementById("rating");
    const $tags=document.getElementById("tags");
    const $title=document.getElementById("title");
    const $content=document.getElementById("content");
    const $btnAdd=document.getElementById("btnAdd");
    const $btnAdmin=document.getElementById("btnAdmin");
    const $adminState=document.getElementById("adminState");
    const adminBar=document.querySelector(".admin-bar");

    function applyAdminUI(){
      $adminState.style.display = state.admin ? "inline-flex" : "none";
    }

    function filterSort(list){
      const q=state.q.trim().toLowerCase();
      let arr=list.filter(x=>{
        if(!q) return true;
        const inTags=(x.tags||[]).join(",").toLowerCase().includes(q);
        return (x.title||"").toLowerCase().includes(q) ||
               (x.content||"").toLowerCase().includes(q) ||
               (x.nickname||"").toLowerCase().includes(q) || inTags;
      });
      arr.sort((a,b)=>{
        if(state.sort==="new") return b.createdAt-a.createdAt;
        if(state.sort==="old") return a.createdAt-b.createdAt;
        if(state.sort==="high") return (b.rating||0)-(a.rating||0);
        if(state.sort==="low") return (a.rating||0)-(b.rating||0);
        return 0;
      });
      return arr;
    }

    function paginate(list){
      const start=(state.page-1)*state.pageSize;
      return list.slice(start,start+state.pageSize);
    }

    function stars(n){ return "â˜…".repeat(n)+"â˜†".repeat(Math.max(0,5-n)); }

    function render(){
      applyAdminUI();
      const all=store.all();
      const filtered=filterSort(all);
      const paged=paginate(filtered);

      $list.innerHTML=paged.map(x=>`
        <article class="card">
          <div class="meta"><span class="nick">@${esc(x.nickname||"ìµëª…")}</span><span>${fmtDate(x.createdAt||Date.now())}</span></div>
          <div class="rating">${stars(x.rating||5)}</div>
          ${x.title?`<h4 style="margin:.4rem 0 .2rem 0">${esc(x.title)}</h4>`:""}
          <div class="content">${esc(x.content||"")}</div>
          ${(x.tags&&x.tags.length)?`<div class="tags">${x.tags.map(t=>`<span class="tag">#${esc(t)}</span>`).join("")}</div>`:""}
          ${state.admin?`<div class="actions" data-nosnippet>
            <button class="btn btn-danger" data-act="del" data-id="${x.id}">ì‚­ì œ</button>
          </div>`:""}
        </article>
      `).join("");

      // ì‚­ì œ í•¸ë“¤ëŸ¬
      $list.querySelectorAll("[data-act='del']").forEach(btn=>{
        btn.onclick=()=>{
          const id=btn.getAttribute("data-id");
          if(confirm("ì •ë§ ì´ í›„ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
            store.remove(id);
            const totalAfter=filterSort(store.all()).length;
            const maxPage=Math.max(1,Math.ceil(totalAfter/state.pageSize));
            if(state.page>maxPage) state.page=maxPage;
            render();
          }
        };
      });

      // í˜ì´ì§€ë„¤ì´ì…˜
      const total=filtered.length;
      const maxPage=Math.max(1,Math.ceil(total/state.pageSize));
      const pages=Array.from({length:maxPage},(_,i)=>i+1);
      $pagination.innerHTML=pages.map(p=>`
        <button class="page-btn ${p===state.page?"active":""}" data-page="${p}">${p}</button>
      `).join("");
      $pagination.querySelectorAll(".page-btn").forEach(b=>{
        b.onclick=()=>{ state.page=parseInt(b.getAttribute("data-page"),10); render(); window.scrollTo({top:0,behavior:"smooth"}); };
      });
    }

    // ì´ë²¤íŠ¸ ë°”ì¸ë”©
    $q.oninput=()=>{ state.q=$q.value; state.page=1; render(); };
    $sort.onchange=()=>{ state.sort=$sort.value; state.page=1; render(); };
    $pageSize.onchange=()=>{ state.pageSize=parseInt($pageSize.value,10); state.page=1; render(); };
    $btnReset.onclick=()=>{ $q.value=""; $sort.value="new"; $pageSize.value="9"; state.q=""; state.sort="new"; state.pageSize=9; state.page=1; render(); };

    $btnAdd.onclick=()=>{
      const nickname=$nickname.value.trim();
      const rating=Math.min(5,Math.max(1,parseInt($rating.value||"5",10)));
      const tags=$tags.value.split(",").map(s=>s.trim()).filter(Boolean);
      const title=$title.value.trim();
      const content=$content.value.trim();
      if(!nickname || !content){ alert("ë‹‰ë„¤ì„ê³¼ ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤."); return; }
      const item={ id:uid(), nickname, title, content, rating, tags, createdAt:Date.now() };
      store.upsert(item);
      // ì…ë ¥ ì´ˆê¸°í™”
      $content.value=""; $title.value=""; $tags.value=""; $rating.value="5";
      render();
      // ìƒˆ ê¸€ ë“±ë¡ í›„ ëª©ë¡ ì˜ì—­ìœ¼ë¡œ ìŠ¤í¬ë¡¤
      document.getElementById("list").scrollIntoView({behavior:"smooth", block:"start"});
    };

    $btnAdmin.onclick=()=>{
      if(state.admin){
        state.admin=false; localStorage.setItem(ADMIN_KEY,"0"); render();
      }else{
        const pin=prompt("ê´€ë¦¬ì PIN ì…ë ¥");
        if(pin===ADMIN_PIN){ state.admin=true; localStorage.setItem(ADMIN_KEY,"1"); render(); }
        else alert("PINì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
      }
    };

    // ê´€ë¦¬ì ë°” ê¸°ë³¸ ìˆ¨ê¹€ + ë‹¨ì¶•í‚¤ë¡œ í‘œì‹œ/ìˆ¨ê¹€ (Ctrl + Alt + A)
    adminBar.style.display="none";
    document.addEventListener("keydown",e=>{
      if(e.ctrlKey && e.altKey && e.key.toLowerCase()==="a"){
        adminBar.style.display = adminBar.style.display==="none" ? "flex" : "none";
      }
    });

    // ë¶€íŠ¸
    (function init(){
      const usp=new URLSearchParams(location.search);
      if(usp.get("q")){ state.q=usp.get("q"); $q.value=state.q; }
      if(usp.get("sort")){ state.sort=usp.get("sort"); $sort.value=state.sort; }
      render();
    })();
  </script>
</body>
</html>
